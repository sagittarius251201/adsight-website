<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AdSight - Generative AI Optimization (GAIO)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #F9FAFB; color: #111827; scroll-behavior: smooth; }
        .dashboard-chart { position: relative; height: 300px; width: 100%; }
        .gradient-text { background: -webkit-linear-gradient(45deg, #4f46e5, #7c3aed); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        
        /* --- Animation Keyframes --- */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes fadeOut { from { opacity: 1; transform: translateY(0); } to { opacity: 0; transform: translateY(-10px); } }
        @keyframes spin { to { transform: rotate(360deg); } }

        /* --- Animation Utility Classes --- */
        .fade-in { animation: fadeIn 0.5s ease-in-out forwards; }
        .loader {
            border: 4px solid #e5e7eb; border-top: 4px solid #4f46e5;
            border-radius: 50%; width: 48px; height: 48px; animation: spin 1s linear infinite;
        }
        
        /* --- Page Transition Classes --- */
        .page-container {
            animation-duration: 0.4s;
            animation-timing-function: ease-in-out;
            animation-fill-mode: forwards;
        }
        .page-fade-in { animation-name: fadeIn; }
        .page-fade-out { animation-name: fadeOut; }
        
        /* --- General Element Transitions --- */
        a, button { transition: all 0.2s ease-in-out; }

        /* --- Scroll Animations --- */
        .scroll-animate {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .scroll-animate.is-visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Styles for Content Studio */
        .geo-studio-container {
            --bg-primary: #F9FAFB; --bg-secondary: #FFFFFF; --border-color: #E5E7EB;
            --text-primary: #111827; --text-secondary: #6B7280; --accent-primary: #4F46E5; --accent-hover: #4338CA;
            background-color: var(--bg-primary); color: var(--text-primary);
        }
        .geo-card { background-color: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 0.75rem; padding: 1.5rem; }
        .geo-btn-primary {
            background-color: var(--accent-primary); color: white; font-weight: 600; padding: 0.5rem 1rem;
            border-radius: 0.5rem; transition: background-color 0.2s; border: none; display: inline-flex; align-items: center; justify-content: center; gap: 0.5rem; font-size: 0.875rem;
        }
        .geo-btn-primary:hover { background-color: var(--accent-hover); }
        .geo-btn-primary:disabled { background-color: #A5B4FC; cursor: not-allowed; }
        .geo-text-input, .geo-textarea { background-color: #F3F4F6; border: 1px solid #D1D5DB; color: var(--text-primary); border-radius: 0.5rem; padding: 0.5rem 0.75rem; font-size: 0.875rem; width: 100%;}
        .geo-interactive-editor {
            background-color: #FFFFFF; border: 1px solid #D1D5DB; border-radius: 0.5rem;
            padding: 1rem; height: 100%; color: #111827; outline: none; white-space: pre-wrap;
        }
        .node { stroke: #fff; stroke-width: 1.5px; }
        .link { stroke: #999; stroke-opacity: 0.6; }
        .node-text { fill: #374151; font-size: 10px; pointer-events: none; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useCallback, useMemo } = React;
        
        // --- Custom Hook for Scroll Animations ---
        const useScrollAnimation = () => {
            useEffect(() => {
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('is-visible');
                        }
                    });
                }, { threshold: 0.1 });

                const elements = document.querySelectorAll('.scroll-animate');
                elements.forEach(el => observer.observe(el));

                return () => elements.forEach(el => observer.unobserve(el));
            }, []);
        };

        // --- UI COMPONENTS ---
        const Icon = ({ name, className }) => {
            const icons = {
                package: <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12.0001 2.00002C6.47727 2.00002 2.00006 6.47723 2.00006 12C2.00006 17.5228 6.47727 22 12.0001 22C17.5229 22 22.0001 17.5228 22.0001 12C22.0001 6.47723 17.5229 2.00002 12.0001 2.00002ZM12.0001 4.00002C16.4184 4.00002 20.0001 7.58172 20.0001 12C20.0001 16.4183 16.4184 20 12.0001 20C7.58181 20 4.00006 16.4183 4.00006 12C4.00006 7.58172 7.58181 4.00002 12.0001 4.00002Z" /></svg>,
                barChart: <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="12" x2="12" y1="20" y2="10" /><line x1="18" y1="20" x2="18" y2="4" /><line x1="6" y1="20" x2="6" y2="16" /></svg>,
                users: <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" /><circle cx="9" cy="7" r="4" /><path d="M22 21v-2a4 4 0 0 0-3-3.87" /><path d="M16 3.13a4 4 0 0 1 0 7.75" /></svg>,
                search: <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="11" cy="11" r="8" /><path d="m21 21-4.3-4.3" /></svg>,
                trendingUp: <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/><polyline points="17 6 23 6 23 12"/></svg>,
                pieChart: <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21.21 15.89A10 10 0 1 1 8 2.83" /><path d="M22 12A10 10 0 0 0 12 2v10z" /></svg>,
                sparkles: <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m12 3-1.9 5.8a2 2 0 0 1-1.2 1.2L3 12l5.8 1.9a2 2 0 0 1 1.2 1.2L12 21l1.9-5.8a2 2 0 0 1 1.2-1.2L21 12l-5.8-1.9a2 2 0 0 1-1.2-1.2Z"/></svg>,
                fingerprint: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 10v4"/><path d="M12 18a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z"/><path d="M12 2a4.5 4.5 0 0 0-4.5 4.5 4.5 4.5 0 0 0 1.2 3.1L9 10.8V10c0-1.1.9-2 2-2h.5a2.5 2.5 0 0 1 2.5 2.5V10h.5a2 2 0 0 1 2 2v1.8l.2.8a4.5 4.5 0 0 0 1.3-3.1A4.5 4.5 0 0 0 12 2Z"/><path d="M4.1 11.2a4.5 4.5 0 0 0-2.6 3.3 4.5 4.5 0 0 0 4.5 4.5h7c.8 0 1.5-.2 2.1-.6"/><path d="M19.9 11.2a4.5 4.5 0 0 1 2.6 3.3 4.5 4.5 0 0 1-4.5 4.5h-7a4.5 4.5 0 0 1-4.2-2.9"/></svg>,
                edit: <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>,
                smile: <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10" /><path d="M8 14s1.5 2 4 2 4-2 4-2" /><line x1="9" y1="9" x2="9.01" y2="9" /><line x1="15" y1="9" x2="15.01" y2="9" /></svg>,
                check: <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round"><polyline points="20 6 9 17 4 12"/></svg>,
                settings: <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>,
                logOut: <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>,
            };
            return <div className={`w-6 h-6 ${className}`}>{icons[name]}</div>;
        };
        const ChartComponent = ({ type, data, options, className }) => {
            const chartRef = useRef(null);
            useEffect(() => {
                if (!chartRef.current) return;
                let chartInstance = chartRef.current.chart;
                if (chartInstance) chartInstance.destroy();
                const chart = new Chart(chartRef.current, { type, data, options });
                chartRef.current.chart = chart;
                return () => { if(chartRef.current && chartRef.current.chart) { chartRef.current.chart.destroy(); chartRef.current.chart = null; } };
            }, [data, options, type]);
            return <div className={className}><canvas ref={chartRef}></canvas></div>;
        };

        const KnowledgeGraph = ({ data }) => {
            const svgRef = useRef();
            useEffect(() => {
                if (!data || !data.nodes || data.nodes.length === 0) return;
                const width = 300; const height = 250;
                const svg = d3.select(svgRef.current).attr("width", width).attr("height", height);
                svg.selectAll("*").remove(); 
                const simulation = d3.forceSimulation(data.nodes)
                    .force("link", d3.forceLink(data.links).id(d => d.id).distance(60))
                    .force("charge", d3.forceManyBody().strength(-100))
                    .force("center", d3.forceCenter(width / 2, height / 2));
                const link = svg.append("g").selectAll("line").data(data.links).enter().append("line").attr("class", "link");
                const node = svg.append("g").selectAll("circle").data(data.nodes).enter().append("circle")
                    .attr("r", d => d.group === 1 ? 8 : 5).attr("fill", d => d.group === 1 ? "#2563EB" : "#94A3B8")
                    .attr("class", "node").call(d3.drag().on("start", (event, d) => { if (!event.active) simulation.alphaTarget(0.3).restart(); d.fx = d.x; d.fy = d.y; }).on("drag", (event, d) => { d.fx = event.x; d.fy = event.y; }).on("end", (event, d) => { if (!event.active) simulation.alphaTarget(0); d.fx = null; d.fy = null; }));
                const text = svg.append("g").selectAll("text").data(data.nodes).enter().append("text").attr("class", "node-text").attr("x", 8).attr("y", "0.31em").text(d => d.id);
                node.append("title").text(d => d.id);
                simulation.on("tick", () => {
                    link.attr("x1", d => d.source.x).attr("y1", d => d.source.y).attr("x2", d => d.target.x).attr("y2", d => d.target.y);
                    node.attr("cx", d => d.x).attr("cy", d => d.y);
                    text.attr("transform", d => `translate(${d.x},${d.y})`);
                });
            }, [data]);
            return <svg ref={svgRef}></svg>;
        };
        
        // --- WEBSITE COMPONENTS ---
        const Header = ({ setRoute }) => (
            <header className="bg-white/90 backdrop-blur-lg sticky top-0 z-50 border-b border-gray-200">
                <nav className="container mx-auto px-6 py-3 flex justify-between items-center">
                    <a href="#" onClick={(e) => { e.preventDefault(); setRoute('home'); }} className="flex items-center gap-2.5">
                        <img src="./assets/adsight_logo.jpeg" alt="AdSight Logo" className="h-20 w-auto" />
                    </a>
                    <div className="hidden md:flex items-center gap-x-8 lg:gap-x-10">
                        <a href="#" onClick={(e) => { e.preventDefault(); setRoute('solutions'); }} className="text-gray-600 hover:text-indigo-600 font-medium text-sm">Why AdSight?</a>
                        <a href="#" onClick={(e) => { e.preventDefault(); setRoute('about'); }} className="text-gray-600 hover:text-indigo-600 font-medium text-sm">Company</a>
                        <a href="#" onClick={(e) => { e.preventDefault(); setRoute('blog'); }} className="text-gray-600 hover:text-indigo-600 font-medium text-sm">Blog</a>
                    </div>
                    <div className="hidden md:flex items-center space-x-4">
                         <a href="#" onClick={(e) => { e.preventDefault(); setRoute('login'); }} className="text-sm font-semibold text-gray-700 hover:text-indigo-600">Client Login</a>
                         <a href="#" onClick={(e) => { e.preventDefault(); setRoute('bookDemo'); }} className="bg-indigo-600 text-white px-5 py-2.5 rounded-md hover:bg-indigo-700 transition-colors text-sm font-semibold shadow-sm">
                            Book a Demo
                        </a>
                    </div>
                </nav>
            </header>
        );

        const Footer = ({ setRoute }) => (
             <footer className="bg-white border-t border-gray-200">
                <div className="container mx-auto px-6 lg:px-8 py-16">
                     <div className="grid grid-cols-2 md:grid-cols-5 gap-12">
                        <div className="col-span-2 md:col-span-1">
                            <img src="./assets/adsight_logo.jpeg" alt="AdSight Logo" className="h-20 w-auto" />
                            <p className="mt-4 text-gray-500 text-sm">The Future of Digital Visibility.</p>
                        </div>
                        <div>
                            <h4 className="font-semibold text-gray-800 tracking-wide">Product</h4>
                            <ul className="mt-4 space-y-3 text-sm">
                                <li><a href="#" onClick={e => {e.preventDefault(); setRoute('solutions')}} className="text-gray-500 hover:text-gray-800">Why AdSight?</a></li>
                                <li><a href="#" onClick={e => {e.preventDefault(); setRoute('bookDemo')}} className="text-gray-500 hover:text-gray-800">Book a Demo</a></li>
                            </ul>
                        </div>
                        <div>
                            <h4 className="font-semibold text-gray-800 tracking-wide">Company</h4>
                            <ul className="mt-4 space-y-3 text-sm">
                                <li><a href="#" onClick={e => {e.preventDefault(); setRoute('about')}} className="text-gray-500 hover:text-gray-800">About Us</a></li>
                                <li><a href="#" className="text-gray-500 hover:text-gray-800">Careers</a></li>
                            </ul>
                        </div>
                        <div>
                            <h4 className="font-semibold text-gray-800 tracking-wide">Resources</h4>
                            <ul className="mt-4 space-y-3 text-sm">
                                 <li><a href="#" onClick={e => {e.preventDefault(); setRoute('blog')}} className="text-gray-500 hover:text-gray-800">Blog</a></li>
                                <li><a href="#" className="text-gray-500 hover:text-gray-800">Case Studies</a></li>
                            </ul>
                        </div>
                         <div>
                            <h4 className="font-semibold text-gray-800 tracking-wide">Social</h4>
                        </div>
                    </div>
                    <div className="mt-16 border-t border-gray-200 pt-8 text-center text-sm text-gray-500">
                        <p>&copy; {new Date().getFullYear()} AdSight Technologies, Inc. All rights reserved.</p>
                    </div>
                </div>
            </footer>
        );

        const HomePage = ({ setRoute }) => {
            useScrollAnimation();
            const llms = [
                { name: 'ChatGPT', logo: <img src="./assets/chatgpt-icon.png" alt="ChatGPT" className="h-12 w-12" /> },
                { name: 'Gemini', logo: <img src="./assets/google-gemini-icon.png" alt="Gemini" className="h-12 w-12" /> },
                { name: 'Perplexity', logo: <img src="./assets/perplexity-ai-icon.png" alt="Perplexity" className="h-12 w-12" /> },
                { name: 'Claude', logo: <img src="./assets/claude-ai-icon.png" alt="Claude" className="h-12 w-12" /> },
            ];
            const [currentLlm, setCurrentLlm] = useState(0);

            useEffect(() => {
                const interval = setInterval(() => {
                    setCurrentLlm(prev => (prev + 1) % llms.length);
                }, 2000);
                return () => clearInterval(interval);
            }, []);

            return (
                <div>
                    <main className="relative isolate overflow-hidden bg-white">
                        <svg className="absolute inset-0 -z-10 h-full w-full stroke-gray-200 [mask-image:radial-gradient(100%_100%_at_top_right,white,transparent)]" aria-hidden="true">
                            <defs><pattern id="0787a7c5-978c-4f66-83c7-11c213f99cb7" width="200" height="200" x="50%" y="-1" patternUnits="userSpaceOnUse"><path d="M.5 200V.5H200" fill="none" /></pattern></defs>
                            <rect width="100%" height="100%" strokeWidth="0" fill="url(#0787a7c5-978c-4f66-83c7-11c213f99cb7)" />
                        </svg>
                        <div className="container mx-auto px-6 py-24 sm:py-32 lg:py-40">
                           <div className="max-w-4xl mx-auto text-center">
                                <h1 className="text-5xl md:text-7xl font-bold tracking-tight text-gray-900 leading-tight">
                                    Stop Competing on Search. <br/> <span className="gradient-text">Start Winning in AI.</span>
                                </h1>
                                <p className="mt-6 text-lg max-w-3xl mx-auto leading-8 text-gray-600">
                                    AdSight is the first Generative AI Optimization (GAIO) platform built to make your brand the definitive answer when customers ask AI.
                                </p>
                                <div className="mt-10">
                                    <a href="#" onClick={(e) => { e.preventDefault(); setRoute('bookDemo'); }} className="bg-indigo-600 text-white px-8 py-4 rounded-lg text-base font-semibold shadow-lg hover:bg-indigo-700 transform hover:scale-105 transition-transform duration-300">
                                        Request Your Free Demo
                                    </a>
                                </div>
                            </div>
                        </div>
                    </main>
                    
                    <section className="bg-gray-50 py-24 sm:py-32">
                        <div className="container mx-auto px-6 lg:px-8 text-center scroll-animate">
                            <h2 className="text-xl font-semibold tracking-tight text-gray-800 sm:text-2xl">
                                Ensure Your Brand is Recommended by
                            </h2>
                            <div className="mt-10 h-16 flex justify-center items-center gap-6 overflow-hidden relative">
                                {llms.map((llm, index) => (
                                     <div key={llm.name} className={`llm-logo-container absolute flex items-center gap-4 ${index === currentLlm ? 'opacity-100' : 'opacity-0'}`}>
                                        {llm.logo}
                                        <span className="text-3xl font-bold text-gray-800">{llm.name}</span>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </section>
                    
                    <section className="py-24 sm:py-32 bg-white">
                        <div className="container mx-auto px-6 lg:px-8">
                            <div className="text-center max-w-3xl mx-auto scroll-animate">
                                <h2 className="text-base font-semibold leading-7 text-indigo-600">The AdSight Method</h2>
                                <p className="mt-2 text-4xl font-bold tracking-tight text-gray-900 sm:text-5xl">Your Path to AI Authority</p>
                            </div>
                             <div className="mt-20 grid grid-cols-1 md:grid-cols-3 gap-x-8 gap-y-16 text-center">
                                <div className="p-8 scroll-animate">
                                    <div className="inline-block bg-indigo-100 text-indigo-600 p-5 rounded-full text-3xl font-bold">1</div>
                                    <h3 className="mt-6 text-xl font-bold text-gray-900">Track</h3>
                                    <p className="mt-4 text-gray-600 leading-relaxed">Continuously monitor your brand's visibility and sentiment across all major AI answer engines.</p>
                                </div>
                                <div className="p-8 scroll-animate" style={{transitionDelay: '200ms'}}>
                                    <div className="inline-block bg-indigo-100 text-indigo-600 p-5 rounded-full text-3xl font-bold">2</div>
                                    <h3 className="mt-6 text-xl font-bold text-gray-900">Understand</h3>
                                    <p className="mt-4 text-gray-600 leading-relaxed">Benchmark against competitors and use our AI to analyze why they get mentioned over you.</p>
                                </div>
                                 <div className="p-8 scroll-animate" style={{transitionDelay: '400ms'}}>
                                    <div className="inline-block bg-indigo-100 text-indigo-600 p-5 rounded-full text-3xl font-bold">3</div>
                                    <h3 className="mt-6 text-xl font-bold text-gray-900">Optimize</h3>
                                    <p className="mt-4 text-gray-600 leading-relaxed">Use our Workbench to action data-driven tasks that make your content the most authoritative source for LLMs.</p>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            );
        };
        
        const SolutionsPage = ({ setRoute }) => {
            useScrollAnimation();
            return (
            <div className="bg-white py-24 sm:py-32">
                <div className="container mx-auto px-6 lg:px-8">
                    <div className="text-center max-w-3xl mx-auto scroll-animate">
                        <h1 className="text-base font-semibold leading-7 text-indigo-600">Why AdSight?</h1>
                        <p className="mt-2 text-4xl font-bold tracking-tight text-gray-900 sm:text-5xl">Go Beyond Visibility. Achieve Authority.</p>
                        <p className="mt-6 text-lg leading-8 text-gray-600">
                            Traditional analytics tools show you what happened. AdSight shows you why it happened and what to do next. We provide a complete, actionable framework to make your brand the most trusted and citable source for AI engines.
                        </p>
                    </div>
                    
                    <div className="mt-24 space-y-28">
                        <div className="grid grid-cols-1 lg:grid-cols-2 gap-x-16 gap-y-12 items-center scroll-animate">
                            <div>
                                <h2 className="text-3xl font-bold tracking-tight text-gray-900">Track: The Complete Picture of Your AI Presence</h2>
                                <p className="mt-6 text-gray-600 leading-8">Continuously monitor your brand's share of voice, sentiment, and accuracy across every major LLM. Get real-time alerts on critical changes before they impact your reputation.</p>
                                <ul className="mt-8 space-y-4 text-gray-700">
                                    <li className="flex items-center gap-3"><Icon name="check" className="text-indigo-600 w-5 h-5 flex-shrink-0"/><span>Real-time Mention Tracking</span></li>
                                    <li className="flex items-center gap-3"><Icon name="check" className="text-indigo-600 w-5 h-5 flex-shrink-0"/><span>Competitor Benchmarking</span></li>
                                    <li className="flex items-center gap-3"><Icon name="check" className="text-indigo-600 w-5 h-5 flex-shrink-0"/><span>Factual Accuracy Audits</span></li>
                                </ul>
                            </div>
                           <div className="bg-gray-50 p-8 rounded-xl shadow-md hover:shadow-2xl transition-shadow duration-300">
                                <div className="bg-white rounded-lg p-6 space-y-4 shadow-inner">
                                    <div className="flex justify-between items-center">
                                        <h4 className="font-semibold text-gray-800">AI Visibility Score</h4>
                                    </div>
                                    <div className="h-48 bg-gray-100 rounded flex items-end p-2">
                                        <div className="w-1/5 bg-indigo-200 h-1/3 rounded-t-md"></div>
                                        <div className="w-1/5 bg-indigo-300 h-2/3 rounded-t-md"></div>
                                        <div className="w-1/5 bg-indigo-400 h-1/2 rounded-t-md"></div>
                                        <div className="w-1/5 bg-indigo-500 h-3/4 rounded-t-md"></div>
                                        <div className="w-1/5 bg-indigo-600 h-full rounded-t-md"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div className="grid grid-cols-1 lg:grid-cols-2 gap-x-16 gap-y-12 items-center scroll-animate">
                             <div className="bg-gray-50 p-8 rounded-xl shadow-md order-last lg:order-first hover:shadow-2xl transition-shadow duration-300">
                                 <div className="bg-white rounded-lg p-6 space-y-4 shadow-inner">
                                    <h4 className="font-semibold text-gray-800">Content Gap Analysis</h4>
                                    <div className="p-4 bg-red-50 rounded-lg border-l-4 border-red-400">
                                        <p className="text-sm text-red-800 font-medium">Missing key statistic on pricing page</p>
                                    </div>
                                    <div className="p-4 bg-green-50 rounded-lg border-l-4 border-green-400">
                                        <p className="text-sm text-green-800 font-medium">"GAIO vs SEO" blog post is highly citable</p>
                                    </div>
                                 </div>
                            </div>
                            <div>
                                <h2 className="text-3xl font-bold tracking-tight text-gray-900">Understand: AI-Powered Gap Analysis</h2>
                                <p className="mt-6 text-gray-600 leading-8">Our platform doesn't just show you data; it provides understanding. AdSight's AI analyzes LLM answers to identify the specific content gaps, factual inaccuracies, or authority deficits that are holding you back.</p>
                            </div>
                        </div>

                         <div className="grid grid-cols-1 lg:grid-cols-2 gap-x-16 gap-y-12 items-center scroll-animate">
                            <div>
                                <h2 className="text-3xl font-bold tracking-tight text-gray-900">Optimize: Your Actionable Workbench</h2>
                                <p className="mt-6 text-gray-600 leading-8">Turn insights into action. The AdSight Workbench generates a prioritized list of data-driven tasks—from updating a statistic on a blog post to creating a new, authoritative case study—to systematically improve your GAIO performance.</p>
                            </div>
                             <div className="bg-gray-50 p-8 rounded-xl shadow-md hover:shadow-2xl transition-shadow duration-300">
                                <div className="bg-white rounded-lg p-6 space-y-4 shadow-inner">
                                    <h4 className="font-semibold text-gray-800">Action Items</h4>
                                     <div className="flex items-center justify-between p-4 border rounded-lg">
                                        <p className="text-sm font-medium">Update pricing page statistics</p>
                                        <span className="text-xs font-bold text-white bg-red-500 px-2.5 py-1 rounded-full">High Priority</span>
                                    </div>
                                     <div className="flex items-center justify-between p-4 border rounded-lg">
                                        <p className="text-sm font-medium">Create new case study for "Synergy"</p>
                                        <span className="text-xs font-bold text-white bg-yellow-500 px-2.5 py-1 rounded-full">Medium</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        )};

        const AboutUsPage = () => {
            useScrollAnimation();
            return (
            <div className="bg-white py-24 sm:py-32">
                <div className="container mx-auto px-6 lg:px-8 text-center">
                    <div className="max-w-4xl mx-auto scroll-animate">
                        <h1 className="text-4xl font-bold tracking-tight sm:text-6xl">We're Building the Future of Search</h1>
                        <p className="mt-6 text-lg text-gray-600 leading-8">AdSight was founded by a team of SEO veterans and AI researchers who saw the paradigm shift coming. Our mission is to empower brands to thrive in the new era of AI-driven discovery.</p>
                    </div>
                    <div className="mt-20 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-x-8 gap-y-16">
                        <div className="text-center scroll-animate">
                            <img className="w-32 h-32 rounded-full mx-auto bg-gray-200 object-cover" src="https://avatar.iran.liara.run/public/boy?username=AnirudhSherman" alt="Anirudh Sherman"/>
                            <h4 className="mt-6 text-lg font-bold">Anirudh Sherman</h4>
                            <p className="text-indigo-600">Co-Founder & CEO</p>
                        </div>
                        <div className="text-center scroll-animate" style={{transitionDelay: '100ms'}}>
                             <img className="w-32 h-32 rounded-full mx-auto bg-gray-200 object-cover" src="https://avatar.iran.liara.run/public/boy?username=RohitHarikrishnan" alt="Rohit Harikrishnan"/>
                            <h4 className="mt-6 text-lg font-bold">Rohit Harikrishnan</h4>
                            <p className="text-indigo-600">Co-Founder & CTO</p>
                        </div>
                        <div className="text-center scroll-animate" style={{transitionDelay: '200ms'}}>
                            <img className="w-32 h-32 rounded-full mx-auto bg-gray-200 object-cover" src="https://avatar.iran.liara.run/public/girl?username=KashishSethia" alt="Kashish Sethia"/>
                            <h4 className="mt-6 text-lg font-bold">Kashish Sethia</h4>
                            <p className="text-indigo-600">Head of AI Research</p>
                        </div>
                        <div className="text-center scroll-animate" style={{transitionDelay: '300ms'}}>
                            <img className="w-32 h-32 rounded-full mx-auto bg-gray-200 object-cover" src="https://avatar.iran.liara.run/public/boy?username=AbhaySingh" alt="Abhay Singh"/>
                            <h4 className="mt-6 text-lg font-bold">Abhay Singh</h4>
                            <p className="text-indigo-600">Head of Product</p>
                        </div>
                         <div className="text-center scroll-animate" style={{transitionDelay: '400ms'}}>
                            <img className="w-32 h-32 rounded-full mx-auto bg-gray-200 object-cover" src="https://avatar.iran.liara.run/public/boy?username=AnirudhAgarwal" alt="Anirudh Agarwal"/>
                            <h4 className="mt-6 text-lg font-bold">Anirudh Agarwal</h4>
                            <p className="text-indigo-600">Head of Strategy</p>
                        </div>
                    </div>
                </div>
            </div>
        )};

        const BlogPage = () => {
            useScrollAnimation();
            const posts = [
                { title: "GAIO vs. SEO: What's the Difference?", date: "August 15, 2025", summary: "A deep dive into why traditional SEO tactics are falling short in the age of Large Language Models.", image: "https://images.unsplash.com/photo-1611162618071-b39a2ec055fb?q=80&w=1000&auto=format&fit=crop" },
                { title: "How We Analyzed 1 Million AI Answers", date: "August 02, 2025", summary: "Our research team breaks down the key factors that make content citable and authoritative for modern AI.", image: "https://images.unsplash.com/photo-1516321497487-e288fb19713f?q=80&w=1000&auto=format&fit=crop" },
                { title: "Preparing Your Brand for Google's SGE", date: "July 28, 2025", summary: "A step-by-step guide for CMOs and digital marketers to get ahead of the biggest shift in search.", image: "https://images.unsplash.com/photo-1587620962725-abab7fe55159?q=80&w=1000&auto=format&fit=crop" },
            ];
            return (
                <div className="bg-white py-24 sm:py-32">
                    <div className="container mx-auto px-6 lg:px-8">
                        <div className="max-w-2xl mx-auto text-center scroll-animate">
                            <h1 className="text-4xl font-bold tracking-tight text-center sm:text-5xl">From the AdSight Blog</h1>
                        </div>
                        <div className="mt-16 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                            {posts.map((post, index) => (
                                <div key={post.title} className="bg-gray-50 rounded-lg overflow-hidden shadow-sm hover:shadow-xl transition-shadow duration-300 scroll-animate" style={{transitionDelay: `${index * 100}ms`}}>
                                    <img src={post.image} className="h-56 w-full object-cover" alt={post.title}/>
                                    <div className="p-6">
                                        <p className="text-sm text-gray-500">{post.date}</p>
                                        <h3 className="mt-2 text-xl font-bold text-gray-900">{post.title}</h3>
                                        <p className="mt-3 text-gray-600 leading-relaxed">{post.summary}</p>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            );
        };

        const BookDemoPage = ({ setRoute }) => {
            useScrollAnimation();
            const [submitted, setSubmitted] = useState(false);
            const handleSubmit = (e) => {
                e.preventDefault();
                setSubmitted(true);
            };

            return (
                <div className="bg-white py-24 sm:py-32">
                    <div className="container mx-auto px-6 lg:px-8">
                        <div className="grid grid-cols-1 lg:grid-cols-2 gap-x-16 gap-y-12 items-center">
                            <div className="max-w-lg scroll-animate">
                                <h1 className="text-4xl font-bold tracking-tight sm:text-5xl">See AdSight in Action</h1>
                                <p className="mt-6 text-lg text-gray-600 leading-8">Schedule a personalized demo with one of our GAIO experts. We'll show you how AdSight can track your brand's AI visibility and provide a clear, actionable path to dominating your category.</p>
                            </div>
                            <div className="bg-gray-50 p-8 sm:p-12 rounded-xl shadow-xl scroll-animate" style={{transitionDelay: '200ms'}}>
                                {submitted ? (
                                    <div className="text-center py-12">
                                        <h2 className="text-2xl font-bold text-green-600">Thank You!</h2>
                                        <p className="mt-2 text-gray-700">Your demo request has been received. We'll be in touch shortly to confirm your time.</p>
                                    </div>
                                ) : (
                                    <form onSubmit={handleSubmit} className="space-y-6">
                                        <h3 className="text-2xl font-bold text-center text-gray-900">Book Your Free Demo</h3>
                                        <div><label className="font-semibold text-sm text-gray-700">Full Name</label><input type="text" className="w-full p-3 mt-1 border rounded-md" required /></div>
                                        <div><label className="font-semibold text-sm text-gray-700">Work Email</label><input type="email" className="w-full p-3 mt-1 border rounded-md" required /></div>
                                        <div><label className="font-semibold text-sm text-gray-700">Company</label><input type="text" className="w-full p-3 mt-1 border rounded-md" required /></div>
                                        <div><label className="font-semibold text-sm text-gray-700">Role</label><input type="text" className="w-full p-3 mt-1 border rounded-md" required /></div>
                                        <button type="submit" className="w-full bg-indigo-600 text-white font-bold py-3.5 rounded-lg hover:bg-indigo-700 transition-colors">Submit Request</button>
                                    </form>
                                )}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };
        
        const LoginPage = ({ setRoute }) => {
            const [email, setEmail] = useState('');
            const [password, setPassword] = useState('');
            const [error, setError] = useState('');

            const handleLogin = (e) => {
                e.preventDefault();
                setError('');
                if ((email === 'client@adsight.com' || email === 'mermaid@adsight.com') && password === 'password123') {
                    setRoute('clientDashboard');
                } else if (email === 'admin@adsight.com' && password === 'password123') {
                    setRoute('companyDashboard');
                } else {
                    setError('Invalid email or password.');
                }
            };

            return (
                <div className="flex min-h-screen flex-col justify-center bg-gray-100 py-12">
                    <div className="w-full max-w-md p-8 space-y-6 bg-white rounded-xl shadow-2xl mx-auto">
                        <div className="text-center">
                            <a href="#" onClick={e => { e.preventDefault(); setRoute('home')}}>
                                <img src="./assets/adsight_logo.jpeg" alt="AdSight Logo" className="h-24 w-auto mx-auto" />
                            </a>
                            <h1 className="text-3xl font-bold mt-4">Welcome Back</h1>
                            <p className="text-gray-500 mt-2">Sign in to access your AdSight dashboard.</p>
                        </div>
                        {error && <div className="bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-md"><p>{error}</p></div>}
                        <form onSubmit={handleLogin} className="space-y-6">
                            <div>
                                <label htmlFor="email" className="text-sm font-bold text-gray-600 block">Email</label>
                                <input id="email" type="email" value={email} onChange={e => setEmail(e.target.value)} className="w-full p-3 mt-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="e.g., client@adsight.com" required />
                            </div>
                            <div>
                                <label htmlFor="password" className="text-sm font-bold text-gray-600 block">Password</label>
                                <input id="password" type="password" value={password} onChange={e => setPassword(e.target.value)} className="w-full p-3 mt-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="e.g., password123" required />
                            </div>
                            <button type="submit" className="w-full py-3 px-4 bg-indigo-600 hover:bg-indigo-700 rounded-md text-white text-lg font-semibold transition-colors">Sign In</button>
                        </form>
                        <div className="text-center text-sm"><p className="text-gray-600">Don't have an account? <a href="#" onClick={(e) => { e.preventDefault(); setRoute('signUp'); }} className="font-semibold text-indigo-600 hover:underline">Sign Up</a></p></div>
                    </div>
                </div>
            );
        };
        
        const SignUpPage = ({ setRoute }) => {
            const [submitted, setSubmitted] = useState(false);
            const handleSubmit = (e) => {
                e.preventDefault();
                setSubmitted(true);
            };

            return (
                <div className="flex min-h-screen flex-col justify-center bg-gray-100 py-12">
                    <div className="w-full max-w-md p-8 space-y-6 bg-white rounded-xl shadow-2xl mx-auto">
                        {submitted ? (
                            <div className="text-center py-12">
                                <h2 className="text-2xl font-bold text-green-600">Welcome to AdSight!</h2>
                                <p className="mt-2 text-gray-700">Your account has been created. You can now sign in.</p>
                                <button onClick={() => setRoute('login')} className="mt-6 bg-indigo-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-indigo-700">Go to Login</button>
                            </div>
                        ) : (
                            <div>
                                <div className="text-center">
                                    <a href="#" onClick={e => { e.preventDefault(); setRoute('home')}}>
                                        <img src="./assets/adsight_logo.jpeg" alt="AdSight Logo" className="h-24 w-auto mx-auto" />
                                    </a>
                                    <h1 className="text-3xl font-bold mt-4">Create Your Account</h1>
                                    <p className="text-gray-500 mt-2">Start your journey to AI authority.</p>
                                </div>
                                <form onSubmit={handleSubmit} className="space-y-4 mt-6">
                                    <div><label className="font-semibold text-sm">Full Name</label><input type="text" className="w-full p-2 mt-1 border rounded" required /></div>
                                    <div><label className="font-semibold text-sm">Company Name</label><input type="text" className="w-full p-2 mt-1 border rounded" required /></div>
                                    <div><label className="font-semibold text-sm">Work Email</label><input type="email" className="w-full p-2 mt-1 border rounded" required /></div>
                                    <div><label className="font-semibold text-sm">Password</label><input type="password" className="w-full p-2 mt-1 border rounded" required /></div>
                                    <button type="submit" className="w-full bg-indigo-600 text-white font-bold py-3 rounded-lg hover:bg-indigo-700">Create Account</button>
                                </form>
                                <div className="text-center text-sm mt-6"><p className="text-gray-600">Already have an account? <a href="#" onClick={(e) => { e.preventDefault(); setRoute('login'); }} className="font-semibold text-indigo-600 hover:underline">Sign In</a></p></div>
                            </div>
                        )}
                    </div>
                </div>
            );
        };
        
        // --- DYNAMIC GEO COMPONENTS ---
        const KnowledgePanelSimulator = ({ data }) => {
            if (!data) return null;
            return (
                <div className="fade-in">
                    <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <div className="lg:col-span-1 bg-white p-5 rounded-xl shadow-sm border">
                            {data.logo && <img src={data.logo} alt={`${data.name} logo`} className="w-16 h-16 rounded-lg shadow-md mb-4 bg-gray-100" onError={(e) => e.target.style.display='none'} />}
                            <h2 className="text-xl font-bold text-gray-800">{data.name || "Brand Name"}</h2>
                            <p className="text-gray-600 mt-2 text-sm">{data.description || "No description found."}</p>
                            <div className="mt-5 space-y-3">
                                {Array.isArray(data.attributes) && data.attributes.map(attr => (
                                    <div key={attr.label}>
                                        <p className="text-xs font-semibold text-gray-700 uppercase tracking-wider">{attr.label}</p>
                                        <p className="text-gray-900 text-sm">{attr.value}</p>
                                    </div>
                                ))}
                            </div>
                        </div>
                        <div className="lg:col-span-2 bg-white p-5 rounded-xl shadow-sm border">
                            <h3 className="font-semibold text-lg mb-4">Entity Completeness Analysis</h3>
                            <div className="flex justify-between items-center mb-1 text-sm">
                                <span className="font-medium text-gray-700">Overall Score</span>
                                <span className="font-bold text-indigo-600">{data.completeness || 0}%</span>
                            </div>
                            <div className="w-full bg-gray-200 rounded-full h-2.5">
                                <div className="bg-indigo-600 h-2.5 rounded-full" style={{ width: `${data.completeness || 0}%` }}></div>
                            </div>
                            <div className="mt-6">
                                <h4 className="font-semibold text-gray-800 mb-3">Actionable Gaps</h4>
                                <ul className="space-y-3">
                                    {data.gaps && data.gaps.length > 0 ? data.gaps.map((gap, i) => (
                                        <li key={i} className="p-3 bg-gray-50 rounded-lg">
                                            <p className="font-medium text-red-700 text-sm">{gap.issue}</p>
                                            <p className="text-xs text-gray-600 mt-1">{gap.suggestion}</p>
                                        </li>
                                    )) : <p className="text-sm text-gray-500">No major gaps identified.</p>}
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
        )};
        const AiCrawlerAudit = ({ data }) => {
            if (!data) return null;
            const StatusIcon = ({ status }) => {
                const statusClasses = { pass: 'bg-green-100 text-green-800', warning: 'bg-yellow-100 text-yellow-800', fail: 'bg-red-100 text-red-800' };
                return <span className={`px-2 py-1 text-xs font-medium rounded-full ${statusClasses[status]}`}>{status}</span>;
            };
            return (
                 <div className="fade-in">
                     <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <div className="lg:col-span-2 bg-white p-5 rounded-xl shadow-sm border">
                            <h3 className="font-semibold text-lg mb-4">Technical Checks</h3>
                            <table className="w-full text-sm">
                                <tbody>
                                {data.checks && data.checks.map((check, i) => (
                                    <tr key={i} className="border-b">
                                        <td className="py-3 pr-3">
                                            <p className="font-medium text-gray-800">{check.name}</p>
                                            <p className="text-xs text-gray-600">{check.details}</p>
                                        </td>
                                        <td className="py-3 text-right"><StatusIcon status={check.status} /></td>
                                    </tr>
                                ))}
                                </tbody>
                            </table>
                        </div>
                        <div className="lg:col-span-1 bg-white p-5 rounded-xl shadow-sm border">
                             <h3 className="font-semibold text-lg mb-4">Predicted Authoritative Citations</h3>
                             <ul className="space-y-3">
                                {data.citations && data.citations.length > 0 ? data.citations.map((cite, i) => (
                                    <li key={i}>
                                        <p className="font-medium text-gray-800 text-sm">{cite.source}</p>
                                        <div className="w-full bg-gray-200 rounded-full h-1.5 mt-1">
                                            <div title={`Authority: ${cite.authority}%`} className="bg-indigo-600 h-1.5 rounded-full" style={{ width: `${cite.authority}%` }}></div>
                                        </div>
                                    </li>
                                )) : <p className="text-sm text-gray-500">No major citations predicted.</p>}
                            </ul>
                        </div>
                    </div>
                </div>
            );
        };
        const BrandSerpAnalysis = ({ data }) => {
            if (!data) return null;
            const sentimentColors = { Positive: 'bg-green-500', Neutral: 'bg-gray-500', Negative: 'bg-red-500' };
            const sentimentCounts = data.results ? data.results.reduce((acc, curr) => {
                acc[curr.sentiment] = (acc[curr.sentiment] || 0) + 1;
                return acc;
            }, {}) : {};
            return (
                 <div className="fade-in">
                     <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <div className="lg:col-span-2">
                             <div className="bg-white p-5 rounded-xl shadow-sm border">
                                <h3 className="font-semibold text-lg mb-4">Simulated Search Results</h3>
                                <div className="space-y-3">
                                    {data.results && data.results.map((res, i) => (
                                        <div key={i} className="flex items-start text-sm">
                                            <div className={`w-2 h-2 rounded-full ${sentimentColors[res.sentiment]} mr-3 mt-1.5 flex-shrink-0`}></div>
                                            <div>
                                                <p className="font-medium text-blue-700">{res.title}</p>
                                                <p className="text-xs text-gray-500 truncate">{res.url}</p>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>
                         <div className="lg:col-span-1">
                            <div className="bg-white p-5 rounded-xl shadow-sm border">
                                <h3 className="font-semibold text-lg mb-4">Sentiment Overview</h3>
                               {Object.keys(sentimentCounts).length > 0 ? (
                                    <ChartComponent type="doughnut"
                                        data={{
                                            labels: Object.keys(sentimentCounts),
                                            datasets: [{ data: Object.values(sentimentCounts), backgroundColor: ['#22c55e', '#6b7280', '#ef4444'], borderColor: '#fff', borderWidth: 2, }]
                                        }}
                                        options={{ responsive: true, maintainAspectRatio: true, plugins: { legend: { position: 'bottom' } } }}
                                        className="!h-64"
                                    />
                               ) : <p className="text-sm text-gray-500 text-center pt-10">No sentiment data to display.</p>}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };
        const ContentStudio = ({ apiKey, callGeminiApi }) => {
            const [isLoading, setIsLoading] = useState(false);
            const [mode, setMode] = useState('brief');
            const [briefKeyword, setBriefKeyword] = useState('');
            const [brandVoiceSample, setBrandVoiceSample] = useState('');
            const [brandVoiceFingerprint, setBrandVoiceFingerprint] = useState(null);
            const [briefData, setBriefData] = useState(null);
            const [auditSuggestions, setAuditSuggestions] = useState([]);
            const [editorContent, setEditorContent] = useState('');
            const [scores, setScores] = useState({ total: 0, structure: 0, keywords: 0, readability: 0, entropy: 0, voice: 0 });
            const [wordCount, setWordCount] = useState(0);

             const handleGenerateBrief = async () => {
                if (!briefKeyword || !apiKey) { 
                    alert("Please provide a keyword and ensure your API key is set.");
                    return;
                }
                setIsLoading(true);
                setBriefData(null);
                setEditorContent('');
                try {
                    const [simulatedAnswer, entities, voice, paa] = await Promise.all([
                        callGeminiApi(apiKey, `Simulate a comprehensive, helpful AI answer for the query "${briefKeyword}". The answer should be well-structured and approximately 200 words.`, false),
                        callGeminiApi(apiKey, `Analyze the topic "${briefKeyword}". Identify the central entity and 8-10 related sub-entities. Respond ONLY with a JSON object containing two keys: "nodes" (an array of objects with "id" and "group" where the central is group 1) and "links" (an array of objects with "source" and "target" IDs).`),
                        brandVoiceSample ? callGeminiApi(apiKey, `Analyze the following text and create a "Brand Voice Fingerprint". Describe the tone, style, complexity, and key terminology in a concise paragraph. \n\nTEXT:\n${brandVoiceSample}`, false) : Promise.resolve(null),
                        callGeminiApi(apiKey, `Analyze the Google SERP for "${briefKeyword}". Identify the top 4 "People Also Ask" questions. Respond ONLY with a JSON array of strings.`)
                    ]);
                    const competitorsText = await callGeminiApi(apiKey, `Provide the raw text content for the top 2 ranking articles for "${briefKeyword}". Combine them into a single block of text for analysis.`, false);
                    setBriefData({ simulatedAnswer, knowledgeGraph: entities, competitorsText, paa });
                    if (voice) setBrandVoiceFingerprint(voice);
                } catch(error) {
                    alert('Brief generation failed. Please check your API key and the console for details.');
                } finally {
                    setIsLoading(false);
                }
            };

            const handleAuditContent = async () => {
                if (editorContent.length < 50 || !apiKey) return;
                setIsLoading(true);
                setAuditSuggestions([]);
                try {
                    const prompt = `Analyze the following text. Identify up to 3 sentences that are written in passive voice or are overly long and complex. For each, provide the original sentence and a suggested rewrite to make it more direct and clear. Respond ONLY with a JSON array of objects with keys: "original", "suggestion".\n\nTEXT:\n${editorContent}`;
                    const suggestionsJson = await callGeminiApi(apiKey, prompt);
                    setAuditSuggestions(suggestionsJson);
                } catch (error) {
                    alert('Content audit failed. Please check the console for details.');
                } finally {
                    setIsLoading(false);
                }
            };
            const applySuggestion = (original, suggestion) => {
                const newContent = editorContent.replace(original, suggestion);
                setEditorContent(newContent);
            };

            const calculateScores = useCallback((content) => {
                const words = content.match(/\b\w+\b/g) || [];
                const wordCount = words.length;
                setWordCount(wordCount);

                if (wordCount < 10) {
                    setScores({ total: 0, structure: 0, keywords: 0, readability: 0, entropy: 0, voice: 0 });
                    return;
                }

                const getStructureScore = () => {
                    let score = 0;
                    const h2Count = (content.match(/^##\s/gm) || []).length;
                    if (h2Count >= 2) score += 50;
                    if (wordCount > 1000) score += 50;
                    return Math.min(100, score);
                };

                const getKeywordsScore = () => {
                    if (!briefData?.knowledgeGraph?.nodes?.length) return 0;
                    const contentLower = content.toLowerCase();
                    const usedKeywords = briefData.knowledgeGraph.nodes.filter(node => contentLower.includes(node.id.toLowerCase())).length;
                    return (usedKeywords / briefData.knowledgeGraph.nodes.length) * 100;
                };

                const getReadabilityScore = () => {
                    const sentences = content.split(/[.!?]+/).filter(Boolean);
                    const syllableCount = (content.match(/[aeiouy]{1,2}/gi) || []).length;
                    if (sentences.length < 2 || wordCount < 20) return 0;
                    const gradeLevel = 0.39 * (wordCount / sentences.length) + 11.8 * (syllableCount / wordCount) - 15.59;
                    return Math.max(0, Math.min(100, 100 - (gradeLevel * 5)));
                };

                const getEntropyScore = () => {
                    if (!briefData?.competitorsText) return 0;
                    const contentSet = new Set(content.toLowerCase().split(/\s+/));
                    if (contentSet.size === 0) return 0;
                    const competitorSet = new Set(briefData.competitorsText.toLowerCase().split(/\s+/));
                    const difference = new Set([...contentSet].filter(x => !competitorSet.has(x)));
                    return Math.min(100, (difference.size / contentSet.size) * 200);
                };
                
                const getVoiceScore = () => {
                    if (!brandVoiceFingerprint || !brandVoiceSample) return 0;
                    const lengthRatio = 1 - (Math.abs(content.length - brandVoiceSample.length) / Math.max(content.length, brandVoiceSample.length));
                    return Math.max(0, Math.min(100, lengthRatio * 100));
                };

                const structure = getStructureScore();
                const keywords = getKeywordsScore();
                const readability = getReadabilityScore();
                const entropy = getEntropyScore();
                const voice = getVoiceScore();
                const total = (structure * 0.2) + (keywords * 0.3) + (readability * 0.2) + (entropy * 0.2) + (voice * 0.1);

                setScores({
                    total: Math.round(total), structure: Math.round(structure),
                    keywords: Math.round(keywords), readability: Math.round(readability),
                    entropy: Math.round(entropy), voice: Math.round(voice),
                });
            }, [briefData, brandVoiceFingerprint, brandVoiceSample]);
            
            const debouncedCalculateScores = useMemo(() => { let timeout; return (content) => { clearTimeout(timeout); timeout = setTimeout(() => calculateScores(content), 500); }; }, [calculateScores]);

            const handleEditorInput = (e) => {
                const content = e.target.innerText;
                setEditorContent(content);
                debouncedCalculateScores(content);
            };

            const ScoreBar = ({ score, label }) => (
                <div>
                    <div className="flex justify-between items-center mb-1"><span className="text-sm font-medium text-gray-500">{label}</span><span className="text-sm font-bold text-gray-800">{score}/100</span></div>
                    <div className="w-full bg-gray-200 rounded-full h-2"><div className="bg-indigo-600 h-2 rounded-full" style={{ width: `${score}%` }}></div></div>
                </div>
            );

            return (
                <div className="geo-studio-container rounded-lg h-[calc(100vh-10rem)] fade-in">
                    <div className="grid grid-cols-1 lg:grid-cols-3 gap-4 p-4 h-full">
                        <aside className="geo-card flex flex-col gap-4">
                             <div>
                                <h1 className="text-xl font-bold text-gray-800 mb-2">Content Studio</h1>
                                <div className="grid grid-cols-2 gap-2 p-1 bg-gray-100 rounded-lg">
                                    <button onClick={() => setMode('brief')} className={`rounded-md py-2 text-sm font-semibold ${mode === 'brief' ? 'bg-indigo-600 text-white' : 'text-gray-600'}`}>Content Brief</button>
                                    <button onClick={() => setMode('audit')} className={`rounded-md py-2 text-sm font-semibold ${mode === 'audit' ? 'bg-indigo-600 text-white' : 'text-gray-600'}`}>Content Audit</button>
                                </div>
                            </div>
                            
                            {mode === 'brief' && <div className="space-y-3">
                                <h3 className="font-semibold text-gray-800">New Content Brief</h3>
                                <div>
                                    <label className="block text-xs font-medium text-gray-600 mb-1">Target Keyword</label>
                                    <input type="text" value={briefKeyword} onChange={e => setBriefKeyword(e.target.value)} className="geo-text-input" placeholder="e.g., 'quantum computing'"/>
                                </div>
                                <div>
                                    <label className="block text-xs font-medium text-gray-600 mb-1">Brand Voice Sample (Optional)</label>
                                    <textarea value={brandVoiceSample} onChange={e => setBrandVoiceSample(e.target.value)} className="geo-textarea" rows="2" placeholder="Paste a paragraph of your ideal writing style..."></textarea>
                                </div>
                                <button onClick={handleGenerateBrief} disabled={!apiKey || isLoading} className="geo-btn-primary w-full"><Icon name="sparkles" /><span>{isLoading ? 'Generating...' : 'Generate Brief'}</span></button>
                            </div>}

                            {mode === 'audit' && <div className="space-y-3">
                                 <h3 className="font-semibold text-gray-800">Content Audit</h3>
                                <p className="text-sm text-gray-500">Audit the content in the editor to get AI-powered suggestions for improvement.</p>
                                <button onClick={handleAuditContent} disabled={!apiKey || isLoading} className="geo-btn-primary w-full"><span>{isLoading ? 'Auditing...' : 'Audit Content'}</span></button>
                            </div>}

                             <div className="border-t border-gray-200 pt-3 mt-auto space-y-3">
                                <div className="flex justify-between items-baseline"><h3 className="font-semibold text-gray-800">Live GEO Score</h3><span className="text-3xl font-black text-gray-800">{scores.total}<span className="text-xl text-gray-400">/100</span></span></div>
                                <div className="space-y-2">
                                    <ScoreBar score={scores.structure} label="Structure" />
                                    <ScoreBar score={scores.keywords} label="Keywords" />
                                    <ScoreBar score={scores.readability} label="Readability" />
                                    <ScoreBar score={scores.entropy} label="Content Entropy" />
                                    <ScoreBar score={scores.voice} label="Brand Voice" />
                                </div>
                                <div className="text-center text-xs text-gray-500 pt-1">Word Count: {wordCount}</div>
                            </div>
                        </aside>
                        
                        <main className="lg:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-4 h-full">
                             <div className="geo-card p-0 h-full"><div onInput={handleEditorInput} contentEditable="true" className="geo-interactive-editor h-full" data-placeholder="Your AI-optimized content will be crafted here..."></div></div>
                             <div className="geo-card space-y-4 overflow-y-auto">
                                {isLoading && <div className="h-full flex justify-center items-center"><div className="loader"></div></div>}
                                
                                {mode === 'brief' && !briefData && !isLoading && <div className="text-center text-gray-500 pt-10">Your predictive analysis and content models will appear here.</div>}
                                {mode === 'brief' && briefData && (
                                    <>
                                        <div><h3 className="text-base font-semibold text-gray-800 mb-2">Predictive Answer Simulation</h3><div className="p-3 bg-gray-50 rounded-lg text-sm italic text-gray-600">{briefData.simulatedAnswer}</div></div>
                                        {briefData.paa && <div><h3 className="text-base font-semibold text-gray-800 mb-2">People Also Ask</h3><ul className="list-disc list-inside text-sm text-gray-600 space-y-1">{briefData.paa.map(q => <li key={q}>{q}</li>)}</ul></div>}
                                        {brandVoiceFingerprint && <div><h3 className="text-base font-semibold text-gray-800 mb-2">Brand Voice Fingerprint</h3><div className="flex items-start gap-3 p-3 bg-gray-50 rounded-lg"><Icon name="fingerprint" className="text-indigo-600 w-8 h-8 flex-shrink-0 mt-1" /><p className="text-xs text-gray-600">{brandVoiceFingerprint}</p></div></div>}
                                        <div><h3 className="text-base font-semibold text-gray-800 mb-2">Knowledge Graph</h3><div className="bg-gray-50 rounded-lg flex justify-center items-center"><KnowledgeGraph data={briefData.knowledgeGraph} /></div></div>
                                    </>
                                )}
                                {mode === 'audit' && !auditSuggestions.length && !isLoading && <div className="text-center text-gray-500 pt-10">Audit suggestions will appear here.</div>}
                                {mode === 'audit' && auditSuggestions.length > 0 && <div>{auditSuggestions.map((s, i) => (
                                    <div key={i} className="p-3 bg-gray-50 rounded-lg mb-3">
                                        <p className="text-xs text-red-600 border-l-2 border-red-400 pl-2 mb-2 italic">"{s.original}"</p>
                                        <p className="text-xs text-green-600 border-l-2 border-green-400 pl-2">"{s.suggestion}"</p>
                                        <button onClick={() => applySuggestion(s.original, s.suggestion)} className="text-xs bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-1 px-3 rounded-full mt-3">Accept Fix</button>
                                    </div>
                                ))}</div>}

                            </div>
                        </main>
                    </div>
                </div>
            );
        };
        // --- MAIN CLIENT DASHBOARD ---
        const ClientDashboard = ({ setRoute, clientToView, backToCompanyDash }) => {
            const [apiKey, setApiKey] = useState('');
            const [isLoading, setIsLoading] = useState(false);
            const [error, setError] = useState('');
            const [analysisData, setAnalysisData] = useState(null);
            const [activeTab, setActiveTab] = useState('overview');
            const [brandGeoSubTab, setBrandGeoSubTab] = useState('entity');
            const [websiteUrl, setWebsiteUrl] = useState('');
            const [isApiModalOpen, setIsApiModalOpen] = useState(false);
            const isMounted = useRef(true);

            useEffect(() => {
                isMounted.current = true;
                const savedKey = localStorage.getItem('geminiApiKey_adsight');
                if(savedKey) setApiKey(savedKey);
                if(clientToView?.url) {
                    setWebsiteUrl(clientToView.url);
                    if(savedKey) {
                        handleAnalyze(clientToView.url, savedKey);
                    }
                }
                return () => {
                    isMounted.current = false;
                }
            }, [clientToView]);

            const callGeminiApi = useCallback(async (currentApiKey, prompt, isJson = true) => {
                if (!currentApiKey) throw new Error("API Key is not set.");
                const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${currentApiKey}`;
                const payload = { contents: [{ parts: [{ text: prompt }] }], generationConfig: { temperature: 0.1, maxOutputTokens: 8192, responseMimeType: isJson ? "application/json" : "text/plain" } };
                const response = await fetch(API_URL, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                if (!response.ok) throw new Error(`API Error: ${response.status}`);
                const data = await response.json();
                if (data.candidates && data.candidates[0].content && data.candidates[0].content.parts[0].text) {
                     const parsedText = data.candidates[0].content.parts[0].text;
                     return isJson ? JSON.parse(parsedText) : parsedText;
                }
                throw new Error("Invalid response structure from API.");
            }, []);
            
            const handleAnalyze = async (url, key) => {
                if (!url || !key) {
                    setError('Please provide both a URL and an API Key.');
                    return;
                }

                let fullUrl = url;
                if (!/^https?:\/\//i.test(url)) {
                    fullUrl = 'https://' + url;
                }

                setIsLoading(true);
                setError('');
                
                const PROXY_URL = `https://api.allorigins.win/raw?url=${encodeURIComponent(fullUrl)}`;
                
                try {
                    const response = await fetch(PROXY_URL);
                    if (!response.ok) throw new Error('Failed to fetch website content.');
                    let textContent = await response.text();
                    textContent = textContent.replace(/<style[^>]*>.*<\/style>/gs, '').replace(/<script[^>]*>.*<\/script>/gs, '').replace(/<[^>]+>/g, ' ').replace(/\s\s+/g, ' ').substring(0, 8000);
                    
                    let brandName;
                    try {
                        brandName = new URL(fullUrl).hostname.replace('www.', '').split('.')[0];
                    } catch (e) {
                        throw new Error("Invalid URL format. Please enter a valid website address.");
                    }

                    const [panelData, auditData, serpData] = await Promise.all([
                        callGeminiApi(key, `Analyze the content for "${brandName}". Generate a Knowledge Panel. Extract: [name, description, logo_url, founders, key_products]. Respond ONLY with a JSON object with keys: 'name', 'logo', 'description', 'attributes' (as an array of {label, value}), 'completeness' (0-100), 'gaps' (array of {issue, suggestion}). \n\nCONTENT: ${textContent}`),
                        callGeminiApi(key, `Analyze "${fullUrl}". Check for AI readiness: pricing, contact info. Predict 3 authoritative citations. Respond ONLY with a JSON object with keys: 'checks' (array of {name, status, details}) and 'citations' (array of {source, authority}).\n\nCONTENT: ${textContent}`),
                        callGeminiApi(key, `Simulate the top 5 search results for "${brandName}". Provide 'title', 'url', and 'sentiment' (Positive, Neutral, or Negative). Respond ONLY with a JSON array under a 'results' key.`)
                    ]);
                    
                    const newData = { panelData, auditData, serpData, brandName, url: fullUrl };
                    if (isMounted.current) {
                        setAnalysisData(newData);
                        const allAnalyses = JSON.parse(localStorage.getItem('adsight_analyses')) || {};
                        allAnalyses[brandName] = newData;
                        localStorage.setItem('adsight_analyses', JSON.stringify(allAnalyses));
                        setActiveTab('brandGeo');
                    }
                } catch (e) {
                    console.error(e);
                    if (isMounted.current) setError(`Analysis failed: ${e.message}.`);
                } finally {
                    if (isMounted.current) setIsLoading(false);
                }
            };
            
            const StatCard = ({ icon, label, value, change }) => {
                return (
                    <div className="bg-white p-6 rounded-xl shadow-sm border">
                        <div className="flex justify-between items-start"><h3 className="text-sm font-medium text-gray-500">{label}</h3><Icon name={icon} className="text-gray-400"/></div>
                        <p className="text-3xl font-bold text-gray-800 mt-2">{value}</p>
                        {change && <p className={`text-sm mt-1 ${change.startsWith('+') ? 'text-green-600' : 'text-red-600'}`}>{change}</p>}
                    </div>
                );
            };
            
            const AnalysisInputScreen = () => (
                <div className="text-center max-w-lg mx-auto pt-20">
                    <h1 className="text-3xl font-bold text-gray-800">Brand GEO Analysis</h1>
                    <p className="mt-4 text-gray-600">Enter a website URL to run a complete analysis of the brand's digital entity.</p>
                     <div className="mt-8 space-y-4">
                        <input type="url" value={websiteUrl} onChange={e => setWebsiteUrl(e.target.value)} placeholder="https://www.yourwebsite.com" className="w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500" />
                     </div>
                    <button onClick={() => { handleAnalyze(websiteUrl, apiKey); }} disabled={isLoading || !apiKey} className="mt-6 w-full bg-indigo-600 text-white font-bold py-3 rounded-lg hover:bg-indigo-700 transition-colors text-lg flex justify-center items-center disabled:bg-indigo-400" title={!apiKey ? "Please set your API Key in Settings first" : ""}>
                        {isLoading ? <div className="loader !w-6 !h-6 !border-t-white !border-4"></div> : "Analyze Website"}
                    </button>
                    {!apiKey && <p className="text-sm text-yellow-600 mt-3">Please set your Gemini API Key in the top-right settings before running an analysis.</p>}
                    {error && <p className="text-red-600 text-sm mt-4">{error}</p>}
                </div>
            );

            const BrandGeoDashboard = () => {
                const SubTab = ({ name, label }) => (
                    <button onClick={() => setBrandGeoSubTab(name)} className={`px-4 py-2 text-sm font-semibold rounded-md ${brandGeoSubTab === name ? 'bg-indigo-600 text-white' : 'text-gray-600 hover:bg-gray-200'}`}>{label}</button>
                );
                
                const visibilityScore = analysisData ? analysisData.panelData.completeness : 0;
                const sentimentCounts = analysisData ? (analysisData.serpData.results || []).reduce((acc, curr) => {
                    acc[curr.sentiment] = (acc[curr.sentiment] || 0) + 1; return acc;
                }, {}) : {};
                const totalSentiments = Object.values(sentimentCounts).reduce((a, b) => a + b, 0);
                const positiveSentiment = totalSentiments > 0 ? Math.round(((sentimentCounts.Positive || 0) / totalSentiments) * 100) : 0;

                return (
                    <div className="fade-in">
                        <header className="flex justify-between items-center mb-8">
                            <div>
                                <h1 className="text-3xl font-bold text-gray-900">{analysisData.brandName} Dashboard</h1>
                                <p className="text-gray-500">Showing results for: <span className="font-semibold text-gray-700">{websiteUrl}</span></p>
                            </div>
                            <button onClick={() => setAnalysisData(null)} className="text-sm font-semibold text-indigo-600 hover:text-indigo-800">Analyze New Site</button>
                        </header>
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                            <StatCard icon="users" label="Entity Score" value={visibilityScore} />
                            <StatCard icon="trendingUp" label="Brand Sentiment" value={`${positiveSentiment}% Positive`} />
                            <StatCard icon="barChart" label="Authoritative Citations" value={analysisData ? analysisData.auditData.citations.length : 0} />
                            <StatCard icon="pieChart" label="Positive SERP %" value={`${Math.round(((sentimentCounts.Positive || 0) / totalSentiments) * 100)}%`} />
                        </div>
                        <div className="mt-8 bg-white p-6 rounded-xl border shadow-sm">
                             <div className="flex items-center justify-between mb-4 border-b pb-4">
                                <div>
                                    <h2 className="text-xl font-bold text-gray-800">Brand Analysis Tools</h2>
                                    <p className="text-sm text-gray-500">Dive deeper into your brand's AI readiness.</p>
                                </div>
                                <div className="flex space-x-2 p-1 bg-gray-100 rounded-lg">
                                    <SubTab name="entity" label="Entity Simulator" />
                                    <SubTab name="audit" label="AI Crawler Audit" />
                                    <SubTab name="serp" label="Brand SERP" />
                                </div>
                            </div>
                            {brandGeoSubTab === 'entity' && <KnowledgePanelSimulator data={analysisData.panelData} />}
                            {brandGeoSubTab === 'audit' && <AiCrawlerAudit data={analysisData.auditData} />}
                            {brandGeoSubTab === 'serp' && <BrandSerpAnalysis data={analysisData.serpData} />}
                        </div>
                    </div>
                );
            };

            const OverviewDashboard = () => {
                const visibilityScore = analysisData ? analysisData.panelData.completeness : '--';
                const sentimentCounts = analysisData ? (analysisData.serpData.results || []).reduce((acc, curr) => {
                    acc[curr.sentiment] = (acc[curr.sentiment] || 0) + 1; return acc;
                }, {}) : {};
                const totalSentiments = Object.values(sentimentCounts).reduce((a, b) => a + b, 0);
                const positiveSentiment = totalSentiments > 0 ? `${Math.round(((sentimentCounts.Positive || 0) / totalSentiments) * 100)}%` : '--';
                const citations = analysisData ? analysisData.auditData.citations.length : '--';

                return (
                     <div className="fade-in">
                         <header className="flex justify-between items-center mb-8">
                            <div><h1 className="text-3xl font-bold text-gray-900">Client Overview</h1></div>
                        </header>
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                            <StatCard icon="users" label="Entity Score" value={visibilityScore} />
                            <StatCard icon="trendingUp" label="Brand Sentiment" value={positiveSentiment} />
                            <StatCard icon="barChart" label="Authoritative Citations" value={citations} />
                            <StatCard icon="pieChart" label="Positive SERP %" value={positiveSentiment} />
                        </div>
                        {!analysisData && 
                            <div className="mt-8 text-center p-12 bg-white rounded-lg border">
                                <h2 className="text-xl font-semibold text-gray-700">No Data Yet</h2>
                                <p className="text-gray-500 mt-2">Go to the 'Brand GEO' tab to run an analysis. The results will populate this dashboard.</p>
                            </div>
                        }
                    </div>
                )
            };
            
            const ApiKeyModal = () => (
                 <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50" onClick={() => setIsApiModalOpen(false)}>
                    <div className="bg-white p-8 rounded-lg shadow-2xl w-full max-w-md" onClick={e => e.stopPropagation()}>
                        <h2 className="text-2xl font-bold mb-4">API Key Settings</h2>
                        <p className="text-gray-600 mb-4">Please enter your Google Gemini API key. This will be saved in your browser's local storage for future sessions.</p>
                        <input type="password" value={apiKey} onChange={e => setApiKey(e.target.value)} placeholder="Enter your Gemini API Key" className="w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500" />
                        <button onClick={() => { localStorage.setItem('geminiApiKey_adsight', apiKey); setIsApiModalOpen(false); alert('API Key saved!'); }} className="mt-6 w-full bg-indigo-600 text-white font-bold py-3 rounded-lg hover:bg-indigo-700">Save Key</button>
                    </div>
                </div>
            );

            const renderContent = () => {
                switch(activeTab) {
                    case 'overview':
                        return <OverviewDashboard />;
                    case 'brandGeo':
                        return analysisData ? <BrandGeoDashboard /> : <AnalysisInputScreen />;
                    case 'contentStudio':
                        return <ContentStudio apiKey={apiKey} callGeminiApi={callGeminiApi} />;
                    default:
                        return <OverviewDashboard />;
                }
            };

            return (
                <div className="flex bg-gray-100 min-h-screen">
                    {isApiModalOpen && <ApiKeyModal />}
                    <aside className="w-64 bg-white p-6 border-r border-gray-200 flex flex-col">
                        <div className="flex items-center gap-2">
                             <a href="#" onClick={(e) => { e.preventDefault(); setRoute('home'); }}>
                                <img src="./assets/adsight_logo.jpeg" alt="AdSight Logo" className="h-20 w-auto" />
                             </a>
                        </div>
                        {clientToView && backToCompanyDash && <button onClick={backToCompanyDash} className="mt-4 text-sm font-semibold text-indigo-600 hover:text-indigo-800">&larr; Back to Portfolio</button> }
                        <nav className="mt-10 space-y-2">
                             <a href="#" onClick={() => setActiveTab('overview')} className={`flex items-center gap-3 px-4 py-2 font-semibold rounded-lg ${activeTab === 'overview' ? 'bg-indigo-50 text-indigo-700' : 'text-gray-600 hover:bg-gray-100'}`}><Icon name="barChart" /> Overview</a>
                             <a href="#" onClick={() => setActiveTab('brandGeo')} className={`flex items-center gap-3 px-4 py-2 font-semibold rounded-lg ${activeTab === 'brandGeo' ? 'bg-indigo-50 text-indigo-700' : 'text-gray-600 hover:bg-gray-100'}`}><Icon name="search" /> Brand GEO</a>
                             <a href="#" onClick={() => setActiveTab('contentStudio')} className={`flex items-center gap-3 px-4 py-2 font-semibold rounded-lg ${activeTab === 'contentStudio' ? 'bg-indigo-50 text-indigo-700' : 'text-gray-600 hover:bg-gray-100'}`}><Icon name="edit" /> Content Studio</a>
                        </nav>
                         <div className="mt-auto p-4">
                           <button onClick={() => setRoute('login')} className="w-full flex items-center justify-center gap-2 bg-gray-200 text-gray-700 text-sm font-bold py-2 rounded-lg hover:bg-gray-300">
                                <Icon name="logOut" />
                                <span>Logout</span>
                            </button>
                        </div>
                    </aside>
                    <main className="flex-1 p-8">
                         <div className="flex justify-end mb-4">
                            <button onClick={() => setIsApiModalOpen(true)} className="p-2 rounded-full hover:bg-gray-200" title="API Key Settings">
                                <Icon name="settings" className="text-gray-600" />
                            </button>
                        </div>
                        {renderContent()}
                    </main>
                </div>
            );
        };
        const CompanyDashboard = ({ setRoute, viewClient }) => {
            const [analyses, setAnalyses] = useState([]);

            useEffect(() => {
                const storedAnalyses = JSON.parse(localStorage.getItem('adsight_analyses')) || {};
                const clients = Object.values(storedAnalyses).map(data => ({
                    id: data.brandName,
                    name: data.brandName.charAt(0).toUpperCase() + data.brandName.slice(1),
                    url: data.url,
                    score: data.panelData.completeness,
                    health: data.panelData.completeness > 75 ? 'Healthy' : 'At Risk',
                }));
                setAnalyses(clients);
            }, []);

            const atRiskClients = analyses.filter(c => c.health === 'At Risk');
            const avgScore = analyses.length > 0 ? Math.round(analyses.reduce((acc, c) => acc + c.score, 0) / analyses.length) : 0;

            return (
                <div className="bg-gray-100 min-h-screen">
                    <aside className="w-64 bg-white p-6 border-r border-gray-200 flex flex-col fixed h-full">
                        <div className="flex items-center gap-2">
                             <a href="#" onClick={(e) => { e.preventDefault(); setRoute('home'); }}>
                                 <img src="./assets/adsight_logo.jpeg" alt="AdSight Logo" className="h-20 w-auto" />
                             </a>
                        </div>
                        <nav className="mt-10 space-y-2">
                             <a href="#" className={`flex items-center gap-3 px-4 py-2 font-semibold rounded-lg bg-indigo-50 text-indigo-700`}><Icon name="barChart" /> Portfolio</a>
                        </nav>
                         <div className="mt-auto p-4">
                           <button onClick={() => setRoute('login')} className="w-full flex items-center justify-center gap-2 bg-gray-200 text-gray-700 text-sm font-bold py-2 rounded-lg hover:bg-gray-300">
                                <Icon name="logOut" />
                                <span>Logout</span>
                            </button>
                        </div>
                    </aside>
                    <main className="ml-64 p-8">
                        <h1 className="text-3xl font-bold text-gray-900">Company Portfolio</h1>
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-6 my-8">
                            <div className="bg-white p-6 rounded-xl border"><h3 className="text-sm font-medium text-gray-500">Total Clients Analyzed</h3><p className="text-3xl font-bold mt-2">{analyses.length}</p></div>
                            <div className="bg-white p-6 rounded-xl border"><h3 className="text-sm font-medium text-gray-500">Average GEO Score</h3><p className="text-3xl font-bold mt-2">{avgScore}</p></div>
                            <div className="bg-white p-6 rounded-xl border"><h3 className="text-sm font-medium text-gray-500">Clients At Risk</h3><p className="text-3xl font-bold mt-2 text-yellow-500">{atRiskClients.length}</p></div>
                        </div>
                        
                        {atRiskClients.length > 0 && 
                            <div className="mb-8">
                                <h2 className="text-xl font-bold text-gray-800 mb-4">Critical Alerts</h2>
                                <div className="bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-r-lg">
                                    {atRiskClients.map(c => <p key={c.id} className="text-sm text-yellow-800 mb-1"><strong>{c.name}</strong> has a low GEO score of {c.score}.</p>)}
                                </div>
                            </div>
                        }

                        <div className="bg-white rounded-lg shadow-sm border">
                            <table className="w-full text-left">
                                <thead className="border-b">
                                    <tr>
                                        <th className="p-4 text-sm font-semibold text-gray-500">Client</th>
                                        <th className="p-4 text-sm font-semibold text-gray-500">Health</th>
                                        <th className="p-4 text-sm font-semibold text-gray-500">GEO Score</th>
                                        <th className="p-4 text-sm font-semibold text-gray-500"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {analyses.length > 0 ? analyses.map(client => (
                                        <tr key={client.id} className="border-b hover:bg-gray-50">
                                            <td className="p-4 font-medium">{client.name}</td>
                                            <td className="p-4"><span className={`px-2 py-1 text-xs font-bold rounded-full ${client.health === 'Healthy' ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'}`}>{client.health}</span></td>
                                            <td className="p-4 font-bold">{client.score}</td>
                                            <td className="p-4 text-right"><button onClick={() => viewClient(client)} className="text-sm font-semibold text-indigo-600 hover:underline">View Dashboard</button></td>
                                        </tr>
                                    )) : (
                                        <tr><td colSpan="4" className="p-8 text-center text-gray-500">No client analyses have been run yet.</td></tr>
                                    )}
                                </tbody>
                            </table>
                        </div>
                    </main>
                </div>
            )
        };
        
        // --- App Router ---
        const App = () => {
            const [route, setRoute] = useState('home');
            const [clientToView, setClientToView] = useState(null);
            const [animationClass, setAnimationClass] = useState('page-fade-in');

            const navigate = (newRoute, data = null) => {
                if (animationClass === 'page-fade-out' || newRoute === route) return;

                if (data) {
                    setClientToView(data);
                }

                setAnimationClass('page-fade-out');

                setTimeout(() => {
                    window.scrollTo(0, 0);
                    setRoute(newRoute);
                    setAnimationClass('page-fade-in');
                }, 400); // Duration should match CSS animation
            };
            
            const FullLayout = ({children}) => (
                <div>
                    <Header setRoute={navigate} />
                    {children}
                    <Footer setRoute={navigate} />
                </div>
            );

            const renderPage = () => {
                if (route === 'login') return <LoginPage setRoute={navigate} />;
                if (route === 'clientDashboard') return <ClientDashboard setRoute={navigate} clientToView={clientToView} backToCompanyDash={() => navigate('companyDashboard')} />;
                if (route === 'companyDashboard') return <CompanyDashboard setRoute={navigate} viewClient={(client) => navigate('clientDashboard', client)} />;

                const marketingPages = {
                    home: <HomePage setRoute={navigate}/>,
                    solutions: <SolutionsPage setRoute={navigate}/>,
                    about: <AboutUsPage />,
                    blog: <BlogPage />,
                    bookDemo: <BookDemoPage setRoute={navigate} />,
                    signUp: <SignUpPage setRoute={navigate} />
                };
                
                const PageComponent = marketingPages[route] || <HomePage setRoute={navigate} />;

                return <FullLayout>{PageComponent}</FullLayout>;
            }

            return (
                <div className={`page-container ${animationClass}`}>
                    {renderPage()}
                </div>
            );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>



